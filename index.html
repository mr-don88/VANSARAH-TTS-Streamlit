<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Speech Studio - Chuyển văn bản thành giọng nói</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Audio Player -->
    <link href="https://cdn.jsdelivr.net/npm/audio-player-js/dist/audio-player.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --success-color: #4cc9f0;
            --dark-color: #1a1a2e;
            --light-color: #f8f9fa;
            --card-bg: #ffffff;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --border-radius: 12px;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            min-height: 100vh;
            padding-bottom: 40px;
        }
        
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            color: white;
            box-shadow: var(--shadow);
        }
        
        .card {
            border: none;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: var(--border-radius) var(--border-radius) 0 0 !important;
            padding: 1rem 1.5rem;
            font-weight: 600;
        }
        
        .nav-tabs {
            border-bottom: 2px solid rgba(67, 97, 238, 0.1);
        }
        
        .nav-tabs .nav-link {
            border: none;
            color: #666;
            font-weight: 500;
            padding: 0.75rem 1.5rem;
            margin: 0 0.25rem;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s ease;
        }
        
        .nav-tabs .nav-link:hover {
            color: var(--primary-color);
            background: rgba(67, 97, 238, 0.05);
        }
        
        .nav-tabs .nav-link.active {
            color: var(--primary-color);
            background: white;
            border-bottom: 3px solid var(--primary-color);
            font-weight: 600;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.3);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            border: 1px solid #ddd;
            padding: 0.75rem;
            transition: all 0.3s ease;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(67, 97, 238, 0.25);
        }
        
        .slider-container {
            padding: 1rem 0;
        }
        
        .audio-player {
            width: 100%;
            margin: 1.5rem 0;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }
        
        .subtitle-box {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
        }
        
        .settings-accordion .accordion-button {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 8px !important;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .char-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-weight: 600;
            margin: 0.25rem;
            font-size: 0.85rem;
        }
        
        .char1-badge { background: #4cc9f0; color: white; }
        .char2-badge { background: #7209b7; color: white; }
        .char3-badge { background: #f72585; color: white; }
        .q-badge { background: #4361ee; color: white; }
        .a-badge { background: #38b000; color: white; }
        
        .loading-spinner {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .footer {
            text-align: center;
            margin-top: 3rem;
            padding: 1.5rem;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            .header {
                padding: 1.5rem;
                text-align: center;
            }
            
            .language-selector {
                position: static;
                margin-bottom: 1rem;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Language Selector -->
    <div class="language-selector">
        <select id="language-select" class="form-select form-select-sm" style="width: auto;">
            <option value="vi">Tiếng Việt</option>
            <option value="en">English</option>
            <option value="fr">Français</option>
            <option value="es">Español</option>
            <option value="de">Deutsch</option>
            <option value="ja">日本語</option>
            <option value="ko">한국어</option>
            <option value="zh">中文</option>
        </select>
    </div>

    <div class="container mt-5">
        <!-- Header -->
        <div class="header text-center">
            <h1><i class="fas fa-microphone-alt me-3"></i> <span data-translate="title">Text to Speech Studio</span></h1>
            <p class="lead mb-0" data-translate="subtitle">Chuyển văn bản thành giọng nói chuyên nghiệp với nhiều giọng đọc và ngôn ngữ</p>
        </div>

        <!-- Main Content -->
        <div class="card">
            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs px-3 pt-3" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="single-tab" data-bs-toggle="tab" data-bs-target="#single" type="button" role="tab">
                        <i class="fas fa-user me-2"></i> <span data-translate="tab1">1 Nhân vật</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="multi-tab" data-bs-toggle="tab" data-bs-target="#multi" type="button" role="tab">
                        <i class="fas fa-users me-2"></i> <span data-translate="tab2">Đa nhân vật</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="qa-tab" data-bs-toggle="tab" data-bs-target="#qa" type="button" role="tab">
                        <i class="fas fa-comments me-2"></i> <span data-translate="tab3">Hỏi & Đáp</span>
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content p-4" id="myTabContent">
                <!-- Tab 1: Single Character -->
                <div class="tab-pane fade show active" id="single" role="tabpanel">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="single-text" class="form-label" data-translate="storyContent">Nội dung truyện</label>
                                <textarea class="form-control" id="single-text" rows="10" placeholder="Nhập nội dung truyện (mỗi dòng là một đoạn)..."></textarea>
                            </div>
                            
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="single-language" class="form-label" data-translate="language">Ngôn ngữ</label>
                                    <select class="form-select" id="single-language">
                                        <option value="vi-VN">Tiếng Việt</option>
                                        <option value="en-US">English (US)</option>
                                        <option value="en-GB">English (UK)</option>
                                        <option value="fr-FR">Français</option>
                                        <option value="es-ES">Español</option>
                                        <option value="de-DE">Deutsch</option>
                                        <option value="ja-JP">日本語</option>
                                        <option value="ko-KR">한국어</option>
                                        <option value="zh-CN">中文 (简体)</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="single-voice" class="form-label" data-translate="voice">Giọng đọc</label>
                                    <select class="form-select" id="single-voice">
                                        <option value="vi-VN-HoaiMyNeural">Hoài My (Nữ)</option>
                                        <option value="vi-VN-NamMinhNeural">Nam Minh (Nam)</option>
                                        <option value="en-US-JennyNeural">Jenny (Nữ)</option>
                                        <option value="en-US-GuyNeural">Guy (Nam)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="slider-container">
                                <label for="single-rate" class="form-label" data-translate="speed">Tốc độ: <span id="single-rate-value">0%</span></label>
                                <input type="range" class="form-range" id="single-rate" min="-30" max="30" step="1" value="0">
                            </div>
                            
                            <div class="slider-container">
                                <label for="single-pitch" class="form-label" data-translate="pitch">Cao độ: <span id="single-pitch-value">0Hz</span></label>
                                <input type="range" class="form-range" id="single-pitch" min="-30" max="30" step="1" value="0">
                            </div>
                            
                            <div class="slider-container">
                                <label for="single-volume" class="form-label" data-translate="volume">Âm lượng: <span id="single-volume-value">100%</span></label>
                                <input type="range" class="form-range" id="single-volume" min="50" max="150" step="1" value="100">
                            </div>
                            
                            <div class="slider-container mb-4">
                                <label for="single-pause" class="form-label" data-translate="pauseDuration">Khoảng nghỉ: <span id="single-pause-value">500ms</span></label>
                                <input type="range" class="form-range" id="single-pause" min="100" max="2000" step="50" value="500">
                            </div>
                            
                            <div class="form-check mb-4">
                                <input class="form-check-input" type="checkbox" id="single-save-settings">
                                <label class="form-check-label" for="single-save-settings" data-translate="saveSettings">Lưu cài đặt</label>
                            </div>
                            
                            <button class="btn btn-primary w-100" id="single-generate" data-translate="generateAudio">
                                <i class="fas fa-microphone-alt me-2"></i> Tạo truyện audio
                            </button>
                        </div>
                        
                        <div class="col-lg-6">
                            <div class="loading-spinner" id="single-loading">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Đang xử lý...</span>
                                </div>
                                <p class="mt-3" data-translate="processing">Đang xử lý văn bản và tạo audio...</p>
                            </div>
                            
                            <div id="single-results" style="display: none;">
                                <div class="mb-3">
                                    <label class="form-label" data-translate="generatedAudio">Audio đã tạo</label>
                                    <audio controls class="audio-player" id="single-audio-player"></audio>
                                    <div class="d-flex gap-2 mt-2">
                                        <button class="btn btn-outline-primary btn-sm" id="single-download-audio">
                                            <i class="fas fa-download me-1"></i> <span data-translate="downloadAudio">Tải audio</span>
                                        </button>
                                        <button class="btn btn-outline-success btn-sm" id="single-download-srt">
                                            <i class="fas fa-file-alt me-1"></i> <span data-translate="downloadSubtitle">Tải phụ đề (.srt)</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label" data-translate="status">Trạng thái</label>
                                    <div class="alert alert-success" id="single-status"></div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label" data-translate="subtitleContent">Nội dung phụ đề</label>
                                    <div class="subtitle-box" id="single-subtitles"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab 2: Multi Character -->
                <div class="tab-pane fade" id="multi" role="tabpanel">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="multi-text" class="form-label" data-translate="multiStoryContent">Nội dung câu chuyện đa nhân vật</label>
                                <textarea class="form-control" id="multi-text" rows="10" placeholder="CHAR1: Lời thoại nhân vật 1&#10;CHAR2: Lời thoại nhân vật 2&#10;CHAR3: Lời thoại nhân vật 3&#10;NARRATOR: Lời dẫn truyện"></textarea>
                                <div class="mt-2">
                                    <small class="text-muted">
                                        <span data-translate="multiFormatHint">Sử dụng tiền tố: CHAR1:, CHAR2:, CHAR3:, NARRATOR:</span>
                                    </small>
                                    <div class="mt-1">
                                        <span class="char-badge char1-badge">CHAR1</span>
                                        <span class="char-badge char2-badge">CHAR2</span>
                                        <span class="char-badge char3-badge">CHAR3</span>
                                        <span class="char-badge" style="background: #6c757d; color: white;">NARRATOR</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Character Settings -->
                            <div class="accordion settings-accordion mb-4" id="multiAccordion">
                                <!-- Character 1 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#char1Settings">
                                            <i class="fas fa-user me-2"></i> <span data-translate="character1Settings">Cài đặt nhân vật 1</span>
                                        </button>
                                    </h2>
                                    <div id="char1Settings" class="accordion-collapse collapse show">
                                        <div class="accordion-body">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label" data-translate="language">Ngôn ngữ</label>
                                                    <select class="form-select multi-char-language" data-char="1">
                                                        <option value="vi-VN">Tiếng Việt</option>
                                                        <option value="en-US">English (US)</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label" data-translate="voice">Giọng đọc</label>
                                                    <select class="form-select multi-char-voice" data-char="1">
                                                        <option value="vi-VN-HoaiMyNeural">Hoài My (Nữ)</option>
                                                        <option value="vi-VN-NamMinhNeural">Nam Minh (Nam)</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="slider-container">
                                                <label class="form-label" data-translate="speed">Tốc độ: <span class="multi-char-rate-value" data-char="1">-20%</span></label>
                                                <input type="range" class="form-range multi-char-rate" data-char="1" min="-30" max="30" value="-20">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Character 2 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#char2Settings">
                                            <i class="fas fa-user me-2"></i> <span data-translate="character2Settings">Cài đặt nhân vật 2</span>
                                        </button>
                                    </h2>
                                    <div id="char2Settings" class="accordion-collapse collapse">
                                        <div class="accordion-body">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label" data-translate="language">Ngôn ngữ</label>
                                                    <select class="form-select multi-char-language" data-char="2">
                                                        <option value="vi-VN">Tiếng Việt</option>
                                                        <option value="en-US">English (US)</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label" data-translate="voice">Giọng đọc</label>
                                                    <select class="form-select multi-char-voice" data-char="2">
                                                        <option value="vi-VN-NamMinhNeural">Nam Minh (Nam)</option>
                                                        <option value="en-US-GuyNeural">Guy (Nam)</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="slider-container">
                                                <label class="form-label" data-translate="speed">Tốc độ: <span class="multi-char-rate-value" data-char="2">-25%</span></label>
                                                <input type="range" class="form-range multi-char-rate" data-char="2" min="-30" max="30" value="-25">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Character 3 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#char3Settings">
                                            <i class="fas fa-user me-2"></i> <span data-translate="character3Settings">Cài đặt nhân vật 3</span>
                                        </button>
                                    </h2>
                                    <div id="char3Settings" class="accordion-collapse collapse">
                                        <div class="accordion-body">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label" data-translate="language">Ngôn ngữ</label>
                                                    <select class="form-select multi-char-language" data-char="3">
                                                        <option value="vi-VN">Tiếng Việt</option>
                                                        <option value="en-US">English (US)</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label" data-translate="voice">Giọng đọc</label>
                                                    <select class="form-select multi-char-voice" data-char="3">
                                                        <option value="vi-VN-HoaiMyNeural">Hoài My (Nữ)</option>
                                                        <option value="en-US-JennyNeural">Jenny (Nữ)</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="slider-container">
                                                <label class="form-label" data-translate="speed">Tốc độ: <span class="multi-char-rate-value" data-char="3">-15%</span></label>
                                                <input type="range" class="form-range multi-char-rate" data-char="3" min="-30" max="30" value="-15">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <label for="multi-repeat" class="form-label" data-translate="repeatTimes">Số lần lặp</label>
                                    <input type="number" class="form-control" id="multi-repeat" min="1" max="5" value="1">
                                </div>
                                <div class="col-md-6">
                                    <label for="multi-pause" class="form-label" data-translate="pauseBetween">Khoảng nghỉ giữa đoạn</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="multi-pause" min="100" max="2000" value="500">
                                        <span class="input-group-text">ms</span>
                                    </div>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary w-100" id="multi-generate" data-translate="generateAudio">
                                <i class="fas fa-users me-2"></i> Tạo câu chuyện audio
                            </button>
                        </div>
                        
                        <div class="col-lg-6">
                            <div class="loading-spinner" id="multi-loading">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Đang xử lý...</span>
                                </div>
                                <p class="mt-3" data-translate="processing">Đang xử lý văn bản và tạo audio...</p>
                            </div>
                            
                            <div id="multi-results" style="display: none;">
                                <div class="mb-3">
                                    <label class="form-label" data-translate="generatedAudio">Audio đã tạo</label>
                                    <audio controls class="audio-player" id="multi-audio-player"></audio>
                                    <div class="d-flex gap-2 mt-2">
                                        <button class="btn btn-outline-primary btn-sm" id="multi-download-audio">
                                            <i class="fas fa-download me-1"></i> <span data-translate="downloadAudio">Tải audio</span>
                                        </button>
                                        <button class="btn btn-outline-success btn-sm" id="multi-download-srt">
                                            <i class="fas fa-file-alt me-1"></i> <span data-translate="downloadSubtitle">Tải phụ đề (.srt)</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label" data-translate="status">Trạng thái</label>
                                    <div class="alert alert-success" id="multi-status"></div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label" data-translate="subtitleContent">Nội dung phụ đề</label>
                                    <div class="subtitle-box" id="multi-subtitles"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab 3: Q&A Dialogue -->
                <div class="tab-pane fade" id="qa" role="tabpanel">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="qa-text" class="form-label" data-translate="dialogueContent">Nội dung hội thoại</label>
                                <textarea class="form-control" id="qa-text" rows="10" placeholder="Q: Câu hỏi&#10;A: Câu trả lời&#10;Q: Câu hỏi tiếp theo&#10;A: Câu trả lời tiếp theo"></textarea>
                                <div class="mt-2">
                                    <small class="text-muted">
                                        <span data-translate="qaFormatHint">Sử dụng tiền tố: Q: cho câu hỏi, A: cho câu trả lời</span>
                                    </small>
                                    <div class="mt-1">
                                        <span class="char-badge q-badge">Q (Câu hỏi)</span>
                                        <span class="char-badge a-badge">A (Câu trả lời)</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Question Settings -->
                            <div class="accordion settings-accordion mb-4" id="qaAccordion">
                                <!-- Question Settings -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#questionSettings">
                                            <i class="fas fa-question-circle me-2"></i> <span data-translate="questionSettings">Cài đặt giọng câu hỏi</span>
                                        </button>
                                    </h2>
                                    <div id="questionSettings" class="accordion-collapse collapse show">
                                        <div class="accordion-body">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label" data-translate="language">Ngôn ngữ</label>
                                                    <select class="form-select" id="qa-language-q">
                                                        <option value="vi-VN">Tiếng Việt</option>
                                                        <option value="en-US">English (US)</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label" data-translate="voice">Giọng đọc</label>
                                                    <select class="form-select" id="qa-voice-q">
                                                        <option value="vi-VN-HoaiMyNeural">Hoài My (Nữ)</option>
                                                        <option value="en-US-JennyNeural">Jenny (Nữ)</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="slider-container">
                                                <label class="form-label" data-translate="speed">Tốc độ: <span id="qa-rate-q-value">-20%</span></label>
                                                <input type="range" class="form-range" id="qa-rate-q" min="-30" max="30" value="-20">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Answer Settings -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answerSettings">
                                            <i class="fas fa-comment-dots me-2"></i> <span data-translate="answerSettings">Cài đặt giọng câu trả lời</span>
                                        </button>
                                    </h2>
                                    <div id="answerSettings" class="accordion-collapse collapse">
                                        <div class="accordion-body">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label" data-translate="language">Ngôn ngữ</label>
                                                    <select class="form-select" id="qa-language-a">
                                                        <option value="vi-VN">Tiếng Việt</option>
                                                        <option value="en-US">English (US)</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label" data-translate="voice">Giọng đọc</label>
                                                    <select class="form-select" id="qa-voice-a">
                                                        <option value="vi-VN-NamMinhNeural">Nam Minh (Nam)</option>
                                                        <option value="en-US-GuyNeural">Guy (Nam)</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="slider-container">
                                                <label class="form-label" data-translate="speed">Tốc độ: <span id="qa-rate-a-value">-25%</span></label>
                                                <input type="range" class="form-range" id="qa-rate-a" min="-30" max="30" value="-25">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row g-3 mb-4">
                                <div class="col-md-4">
                                    <label for="qa-repeat" class="form-label" data-translate="repeatTimes">Số lần lặp</label>
                                    <input type="number" class="form-control" id="qa-repeat" min="1" max="5" value="2">
                                </div>
                                <div class="col-md-4">
                                    <label for="qa-pause-q" class="form-label" data-translate="pauseQuestion">Khoảng nghỉ câu hỏi</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="qa-pause-q" min="100" max="1000" value="200">
                                        <span class="input-group-text">ms</span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label for="qa-pause-a" class="form-label" data-translate="pauseAnswer">Khoảng nghỉ câu trả lời</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="qa-pause-a" min="100" max="2000" value="500">
                                        <span class="input-group-text">ms</span>
                                    </div>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary w-100" id="qa-generate" data-translate="generateAudio">
                                <i class="fas fa-comments me-2"></i> Tạo audio hội thoại
                            </button>
                        </div>
                        
                        <div class="col-lg-6">
                            <div class="loading-spinner" id="qa-loading">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Đang xử lý...</span>
                                </div>
                                <p class="mt-3" data-translate="processing">Đang xử lý văn bản và tạo audio...</p>
                            </div>
                            
                            <div id="qa-results" style="display: none;">
                                <div class="mb-3">
                                    <label class="form-label" data-translate="generatedAudio">Audio đã tạo</label>
                                    <audio controls class="audio-player" id="qa-audio-player"></audio>
                                    <div class="d-flex gap-2 mt-2">
                                        <button class="btn btn-outline-primary btn-sm" id="qa-download-audio">
                                            <i class="fas fa-download me-1"></i> <span data-translate="downloadAudio">Tải audio</span>
                                        </button>
                                        <button class="btn btn-outline-success btn-sm" id="qa-download-srt">
                                            <i class="fas fa-file-alt me-1"></i> <span data-translate="downloadSubtitle">Tải phụ đề (.srt)</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label" data-translate="status">Trạng thái</label>
                                    <div class="alert alert-success" id="qa-status"></div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label" data-translate="subtitleContent">Nội dung phụ đề</label>
                                    <div class="subtitle-box" id="qa-subtitles"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Features Section -->
        <div class="row mt-5">
            <div class="col-md-4 mb-4">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <div class="feature-icon">
                            <i class="fas fa-language"></i>
                        </div>
                        <h5 class="card-title" data-translate="feature1Title">Đa Ngôn Ngữ</h5>
                        <p class="card-text" data-translate="feature1Desc">Hỗ trợ nhiều ngôn ngữ và giọng đọc khác nhau từ Microsoft Azure TTS</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h5 class="card-title" data-translate="feature2Title">Đa Nhân Vật</h5>
                        <p class="card-text" data-translate="feature2Desc">Tạo hội thoại với nhiều nhân vật, mỗi nhân vật có giọng đọc riêng</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <div class="feature-icon">
                            <i class="fas fa-closed-captioning"></i>
                        </div>
                        <h5 class="card-title" data-translate="feature3Title">Phụ đề Tự động</h5>
                        <p class="card-text" data-translate="feature3Desc">Tự động tạo phụ đề SRT đồng bộ với audio</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p data-translate="footerText">Text to Speech Studio - Công cụ chuyển văn bản thành giọng nói chuyên nghiệp</p>
            <p class="text-muted">
                <small data-translate="techUsed">Sử dụng công nghệ Microsoft Azure Cognitive Services TTS</small>
            </p>
        </div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/audio-player-js/dist/audio-player.min.js"></script>
    
    <!-- Translation Data -->
    <script>
        const translations = {
            vi: {
                title: "Text to Speech Studio",
                subtitle: "Chuyển văn bản thành giọng nói chuyên nghiệp với nhiều giọng đọc và ngôn ngữ",
                tab1: "1 Nhân vật",
                tab2: "Đa nhân vật",
                tab3: "Hỏi & Đáp",
                storyContent: "Nội dung truyện",
                multiStoryContent: "Nội dung câu chuyện đa nhân vật",
                dialogueContent: "Nội dung hội thoại",
                language: "Ngôn ngữ",
                voice: "Giọng đọc",
                speed: "Tốc độ",
                pitch: "Cao độ",
                volume: "Âm lượng",
                pauseDuration: "Khoảng nghỉ",
                saveSettings: "Lưu cài đặt",
                generateAudio: "Tạo audio",
                processing: "Đang xử lý văn bản và tạo audio...",
                generatedAudio: "Audio đã tạo",
                downloadAudio: "Tải audio",
                downloadSubtitle: "Tải phụ đề (.srt)",
                status: "Trạng thái",
                subtitleContent: "Nội dung phụ đề",
                character1Settings: "Cài đặt nhân vật 1",
                character2Settings: "Cài đặt nhân vật 2",
                character3Settings: "Cài đặt nhân vật 3",
                multiFormatHint: "Sử dụng tiền tố: CHAR1:, CHAR2:, CHAR3:, NARRATOR:",
                qaFormatHint: "Sử dụng tiền tố: Q: cho câu hỏi, A: cho câu trả lời",
                repeatTimes: "Số lần lặp",
                pauseBetween: "Khoảng nghỉ giữa đoạn",
                pauseQuestion: "Khoảng nghỉ câu hỏi",
                pauseAnswer: "Khoảng nghỉ câu trả lời",
                questionSettings: "Cài đặt giọng câu hỏi",
                answerSettings: "Cài đặt giọng câu trả lời",
                feature1Title: "Đa Ngôn Ngữ",
                feature1Desc: "Hỗ trợ nhiều ngôn ngữ và giọng đọc khác nhau từ Microsoft Azure TTS",
                feature2Title: "Đa Nhân Vật",
                feature2Desc: "Tạo hội thoại với nhiều nhân vật, mỗi nhân vật có giọng đọc riêng",
                feature3Title: "Phụ đề Tự động",
                feature3Desc: "Tự động tạo phụ đề SRT đồng bộ với audio",
                footerText: "Text to Speech Studio - Công cụ chuyển văn bản thành giọng nói chuyên nghiệp",
                techUsed: "Sử dụng công nghệ Microsoft Azure Cognitive Services TTS"
            },
            en: {
                title: "Text to Speech Studio",
                subtitle: "Convert text to professional speech with multiple voices and languages",
                tab1: "Single Character",
                tab2: "Multi Character",
                tab3: "Q&A Dialogue",
                storyContent: "Story Content",
                multiStoryContent: "Multi-Character Story Content",
                dialogueContent: "Dialogue Content",
                language: "Language",
                voice: "Voice",
                speed: "Speed",
                pitch: "Pitch",
                volume: "Volume",
                pauseDuration: "Pause Duration",
                saveSettings: "Save Settings",
                generateAudio: "Generate Audio",
                processing: "Processing text and generating audio...",
                generatedAudio: "Generated Audio",
                downloadAudio: "Download Audio",
                downloadSubtitle: "Download Subtitle (.srt)",
                status: "Status",
                subtitleContent: "Subtitle Content",
                character1Settings: "Character 1 Settings",
                character2Settings: "Character 2 Settings",
                character3Settings: "Character 3 Settings",
                multiFormatHint: "Use prefixes: CHAR1:, CHAR2:, CHAR3:, NARRATOR:",
                qaFormatHint: "Use prefixes: Q: for questions, A: for answers",
                repeatTimes: "Repeat Times",
                pauseBetween: "Pause Between Segments",
                pauseQuestion: "Question Pause",
                pauseAnswer: "Answer Pause",
                questionSettings: "Question Voice Settings",
                answerSettings: "Answer Voice Settings",
                feature1Title: "Multi-Language",
                feature1Desc: "Support multiple languages and voices from Microsoft Azure TTS",
                feature2Title: "Multi-Character",
                feature2Desc: "Create dialogues with multiple characters, each with unique voice",
                feature3Title: "Auto Subtitles",
                feature3Desc: "Automatically generate SRT subtitles synchronized with audio",
                footerText: "Text to Speech Studio - Professional text-to-speech conversion tool",
                techUsed: "Powered by Microsoft Azure Cognitive Services TTS"
            },
            // Additional languages can be added here
        };
    </script>
    
    <!-- Main Application Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Language Management
            const languageSelect = document.getElementById('language-select');
            let currentLanguage = 'vi';
            
            function updateTranslations(lang) {
                currentLanguage = lang;
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (translations[lang] && translations[lang][key]) {
                        if (element.tagName === 'INPUT' && element.type === 'text' || element.type === 'textarea') {
                            element.placeholder = translations[lang][key];
                        } else {
                            element.textContent = translations[lang][key];
                        }
                    }
                });
                
                // Update slider values
                updateSliderValues();
            }
            
            languageSelect.addEventListener('change', function() {
                updateTranslations(this.value);
            });
            
            // Initialize with Vietnamese
            updateTranslations('vi');
            
            // Slider Value Updates
            function updateSliderValues() {
                // Single character sliders
                document.getElementById('single-rate-value').textContent = 
                    document.getElementById('single-rate').value + '%';
                document.getElementById('single-pitch-value').textContent = 
                    document.getElementById('single-pitch').value + 'Hz';
                document.getElementById('single-volume-value').textContent = 
                    document.getElementById('single-volume').value + '%';
                document.getElementById('single-pause-value').textContent = 
                    document.getElementById('single-pause').value + 'ms';
                
                // Multi character sliders
                document.querySelectorAll('.multi-char-rate').forEach(slider => {
                    const char = slider.getAttribute('data-char');
                    const valueSpan = document.querySelector(`.multi-char-rate-value[data-char="${char}"]`);
                    valueSpan.textContent = slider.value + '%';
                });
                
                // Q&A sliders
                document.getElementById('qa-rate-q-value').textContent = 
                    document.getElementById('qa-rate-q').value + '%';
                document.getElementById('qa-rate-a-value').textContent = 
                    document.getElementById('qa-rate-a').value + '%';
            }
            
            // Attach slider events
            document.querySelectorAll('input[type="range"]').forEach(slider => {
                slider.addEventListener('input', updateSliderValues);
            });
            
            // Initialize slider values
            updateSliderValues();
            
            // Audio Generation Simulation
            function simulateTTSGeneration(text, voice, rate, pitch, volume, callback) {
                // In a real implementation, this would call a backend API
                // For demo purposes, we simulate with a timeout
                
                setTimeout(() => {
                    // Generate a fake audio URL (in real app, this would be from your TTS service)
                    const audioBlob = new Blob([], { type: 'audio/mpeg' });
                    const audioUrl = URL.createObjectURL(audioBlob);
                    
                    // Generate fake subtitles
                    const subtitles = `1\n00:00:00,000 --> 00:00:05,000\n${text.substring(0, 100)}...\n\n2\n00:00:05,000 --> 00:00:10,000\n${text.substring(100, 200)}...`;
                    
                    callback({
                        audioUrl: audioUrl,
                        subtitles: subtitles,
                        status: '✅ Hoàn thành! Bấm vào nút phát để nghe'
                    });
                }, 2000);
            }
            
            // Single Character Tab
            document.getElementById('single-generate').addEventListener('click', function() {
                const text = document.getElementById('single-text').value;
                const voice = document.getElementById('single-voice').value;
                const rate = document.getElementById('single-rate').value;
                const pitch = document.getElementById('single-pitch').value;
                const volume = document.getElementById('single-volume').value;
                
                if (!text.trim()) {
                    alert(currentLanguage === 'vi' ? 'Vui lòng nhập nội dung văn bản' : 'Please enter text content');
                    return;
                }
                
                // Show loading
                document.getElementById('single-loading').style.display = 'block';
                document.getElementById('single-results').style.display = 'none';
                
                simulateTTSGeneration(text, voice, rate, pitch, volume, function(result) {
                    document.getElementById('single-loading').style.display = 'none';
                    document.getElementById('single-results').style.display = 'block';
                    
                    const audioPlayer = document.getElementById('single-audio-player');
                    audioPlayer.src = result.audioUrl;
                    
                    document.getElementById('single-status').textContent = result.status;
                    document.getElementById('single-subtitles').textContent = result.subtitles;
                    
                    // Download buttons
                    document.getElementById('single-download-audio').onclick = function() {
                        const link = document.createElement('a');
                        link.href = result.audioUrl;
                        link.download = 'story_audio.mp3';
                        link.click();
                    };
                    
                    document.getElementById('single-download-srt').onclick = function() {
                        const blob = new Blob([result.subtitles], { type: 'text/srt' });
                        const url = URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.href = url;
                        link.download = 'subtitles.srt';
                        link.click();
                    };
                });
            });
            
            // Multi Character Tab
            document.getElementById('multi-generate').addEventListener('click', function() {
                const text = document.getElementById('multi-text').value;
                
                if (!text.trim()) {
                    alert(currentLanguage === 'vi' ? 'Vui lòng nhập nội dung văn bản' : 'Please enter text content');
                    return;
                }
                
                // Get character settings
                const charSettings = {
                    1: {
                        language: document.querySelector('.multi-char-language[data-char="1"]').value,
                        voice: document.querySelector('.multi-char-voice[data-char="1"]').value,
                        rate: document.querySelector('.multi-char-rate[data-char="1"]').value
                    },
                    2: {
                        language: document.querySelector('.multi-char-language[data-char="2"]').value,
                        voice: document.querySelector('.multi-char-voice[data-char="2"]').value,
                        rate: document.querySelector('.multi-char-rate[data-char="2"]').value
                    },
                    3: {
                        language: document.querySelector('.multi-char-language[data-char="3"]').value,
                        voice: document.querySelector('.multi-char-voice[data-char="3"]').value,
                        rate: document.querySelector('.multi-char-rate[data-char="3"]').value
                    }
                };
                
                // Show loading
                document.getElementById('multi-loading').style.display = 'block';
                document.getElementById('multi-results').style.display = 'none';
                
                // Simulate processing
                setTimeout(() => {
                    document.getElementById('multi-loading').style.display = 'none';
                    document.getElementById('multi-results').style.display = 'block';
                    
                    // Generate fake audio URL
                    const audioBlob = new Blob([], { type: 'audio/mpeg' });
                    const audioUrl = URL.createObjectURL(audioBlob);
                    
                    // Parse dialogue for subtitles
                    const lines = text.split('\n');
                    let subtitles = '';
                    let time = 0;
                    
                    lines.forEach((line, index) => {
                        if (line.trim()) {
                            subtitles += `${index + 1}\n`;
                            subtitles += `00:00:${time.toString().padStart(3, '0')},000 --> 00:00:${(time + 5).toString().padStart(3, '0')},000\n`;
                            subtitles += `${line.trim()}\n\n`;
                            time += 5;
                        }
                    });
                    
                    const audioPlayer = document.getElementById('multi-audio-player');
                    audioPlayer.src = audioUrl;
                    
                    document.getElementById('multi-status').textContent = 
                        currentLanguage === 'vi' ? '✅ Hoàn thành! Bấm vào nút phát để nghe' : '✅ Complete! Click play to listen';
                    document.getElementById('multi-subtitles').textContent = subtitles;
                    
                    // Download buttons
                    document.getElementById('multi-download-audio').onclick = function() {
                        const link = document.createElement('a');
                        link.href = audioUrl;
                        link.download = 'multi_character_story.mp3';
                        link.click();
                    };
                    
                    document.getElementById('multi-download-srt').onclick = function() {
                        const blob = new Blob([subtitles], { type: 'text/srt' });
                        const url = URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.href = url;
                        link.download = 'multi_character_subtitles.srt';
                        link.click();
                    };
                }, 3000);
            });
            
            // Q&A Tab
            document.getElementById('qa-generate').addEventListener('click', function() {
                const text = document.getElementById('qa-text').value;
                
                if (!text.trim()) {
                    alert(currentLanguage === 'vi' ? 'Vui lòng nhập nội dung văn bản' : 'Please enter text content');
                    return;
                }
                
                // Show loading
                document.getElementById('qa-loading').style.display = 'block';
                document.getElementById('qa-results').style.display = 'none';
                
                // Simulate processing
                setTimeout(() => {
                    document.getElementById('qa-loading').style.display = 'none';
                    document.getElementById('qa-results').style.display = 'block';
                    
                    // Generate fake audio URL
                    const audioBlob = new Blob([], { type: 'audio/mpeg' });
                    const audioUrl = URL.createObjectURL(audioBlob);
                    
                    // Parse Q&A for subtitles
                    const lines = text.split('\n');
                    let subtitles = '';
                    let time = 0;
                    
                    lines.forEach((line, index) => {
                        if (line.trim()) {
                            subtitles += `${index + 1}\n`;
                            subtitles += `00:00:${time.toString().padStart(3, '0')},000 --> 00:00:${(time + 3).toString().padStart(3, '0')},000\n`;
                            subtitles += `${line.trim()}\n\n`;
                            time += 3;
                        }
                    });
                    
                    const audioPlayer = document.getElementById('qa-audio-player');
                    audioPlayer.src = audioUrl;
                    
                    document.getElementById('qa-status').textContent = 
                        currentLanguage === 'vi' ? '✅ Hoàn thành! Bấm vào nút phát để nghe' : '✅ Complete! Click play to listen';
                    document.getElementById('qa-subtitles').textContent = subtitles;
                    
                    // Download buttons
                    document.getElementById('qa-download-audio').onclick = function() {
                        const link = document.createElement('a');
                        link.href = audioUrl;
                        link.download = 'qa_dialogue.mp3';
                        link.click();
                    };
                    
                    document.getElementById('qa-download-srt').onclick = function() {
                        const blob = new Blob([subtitles], { type: 'text/srt' });
                        const url = URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.href = url;
                        link.download = 'qa_subtitles.srt';
                        link.click();
                    };
                }, 2500);
            });
            
            // Initialize Audio Players
            const audioPlayers = document.querySelectorAll('audio');
            audioPlayers.forEach(player => {
                new AudioPlayer(player);
            });
            
            // Sample Data Button (for demo)
            const sampleButtons = `
                <div class="mt-2">
                    <button class="btn btn-sm btn-outline-secondary me-2" onclick="loadSample('single')">Tải mẫu 1 nhân vật</button>
                    <button class="btn btn-sm btn-outline-secondary me-2" onclick="loadSample('multi')">Tải mẫu đa nhân vật</button>
                    <button class="btn btn-sm btn-outline-secondary" onclick="loadSample('qa')">Tải mẫu hỏi đáp</button>
                </div>
            `;
            
            document.getElementById('single-text').parentNode.innerHTML += sampleButtons;
            document.getElementById('multi-text').parentNode.innerHTML += sampleButtons.replace(/loadSample\('(\w+)'\)/g, "loadSample('$1')");
            document.getElementById('qa-text').parentNode.innerHTML += sampleButtons.replace(/loadSample\('(\w+)'\)/g, "loadSample('$1')");
            
            // Load sample data function
            window.loadSample = function(type) {
                const samples = {
                    single: "Xin chào! Đây là bản demo của công cụ Text to Speech.\n\nCông cụ này giúp bạn chuyển văn bản thành giọng nói tự nhiên.\n\nBạn có thể điều chỉnh tốc độ, cao độ và âm lượng theo ý muốn.",
                    multi: "CHAR1: Xin chào, tôi là nhân vật số 1.\nCHAR2: Chào bạn, tôi là nhân vật số 2.\nCHAR1: Hôm nay chúng ta sẽ thảo luận về công nghệ Text to Speech.\nCHAR2: Đó là một công nghệ rất thú vị và hữu ích.\nNARRATOR: Cuộc trò chuyện tiếp tục với nhiều chủ đề hấp dẫn.",
                    qa: "Q: Text to Speech là gì?\nA: Text to Speech là công nghệ chuyển đổi văn bản thành giọng nói.\n\nQ: Công cụ này có những tính năng gì?\nA: Công cụ hỗ trợ nhiều ngôn ngữ, giọng đọc, và tạo phụ đề tự động.\n\nQ: Làm thế nào để sử dụng?\nA: Chỉ cần nhập văn bản, chọn giọng đọc và bấm nút tạo audio."
                };
                
                if (type === 'single') {
                    document.getElementById('single-text').value = samples.single;
                } else if (type === 'multi') {
                    document.getElementById('multi-text').value = samples.multi;
                } else if (type === 'qa') {
                    document.getElementById('qa-text').value = samples.qa;
                }
            };
        });
    </script>
</body>
</html>
